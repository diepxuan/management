php_admin_value date.timezone           "Asia/Ho_Chi_Minh"

php_value       display_errors          1
php_value       display_startup_errors  1
php_flag        display_errors          1
php_flag        display_startup_errors  1
php_value       error_reporting         -1

php_value       max_execution_time      30
php_value       memory_limit            256M

php_value       post_max_size           128M
php_value       upload_max_filesize     128M

php_value       max_input_vars          75000

php_value       session.gc_maxlifetime  2628000

AcceptFilter http none
AcceptFilter https none

DocumentRoot "D:/server"
<Directory D:/server>
    Options Indexes FollowSymLinks
    AllowOverride All
    Require all granted

    DirectoryIndex index.php

    RewriteEngine On
    RewriteBase /
    RewriteRule ^index\.php$ - [L]
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond %{REQUEST_FILENAME} !-l
    RewriteRule . /index.php [L]
</Directory>

<Directory D:/server/dev>
    Options Indexes FollowSymLinks
    AllowOverride All
    Require all granted
</Directory>

<Directory D:/server/dev/*>
    Options Indexes FollowSymLinks
    AllowOverride All
    Require all granted
</Directory>

<Directory D:/server/live>
    Options Indexes FollowSymLinks
    AllowOverride All
    Require all granted
</Directory>

<Directory D:/server/live/*>
    Options Indexes FollowSymLinks
    AllowOverride All
    Require all granted
</Directory>

<IfModule mod_ssl.c>
    Listen 443
</IfModule>

########################################################################
# localhost (private develop for ~subfolder, phpmyadmin, ddns app)
# domain: dev.diepxuan.vn diepxuan.com local.dev localhost dxvn.ddns.net
########################################################################
<VirtualHost *:80>
    ServerAlias local.dev
    ServerAlias localhost
    DocumentRoot D:/server/dev/

    AliasMatch "^/~([a-zA-Z0-9\.]+)/(.+)" "D:/server/live/$1/$2"
    AliasMatch "^/~([a-zA-Z0-9\.]+)/"     "D:/server/live/$1/"
    AliasMatch "^/~([a-zA-Z0-9\.]+)"      "D:/server/live/$1"
</VirtualHost>

<VirtualHost *:443>
    ServerAlias local.dev
    ServerAlias localhost
    DocumentRoot D:/server/dev/

    SSLEngine on
    SSLProtocol all -SSLv2 -SSLv3

    SSLCipherSuite ALL:!ADH:!EXPORT56:RC4+RSA:+HIGH:+MEDIUM:+LOW:+SSLv2:+EXP

    SSLCertificateFile D:/server/code/ssl/local/certificate.crt
    SSLCertificateKeyFile D:/server/code/ssl/local/private.key

    AliasMatch "^/~([a-zA-Z0-9\.]+)/(.+)" "D:/server/live/$1/$2"
    AliasMatch "^/~([a-zA-Z0-9\.]+)/"     "D:/server/live/$1/"
    AliasMatch "^/~([a-zA-Z0-9\.]+)"      "D:/server/live/$1"
</VirtualHost>

########################################################################
# domain: local.*
########################################################################
<VirtualHost *:80>
    UseCanonicalName Off
    ServerAlias local.*
    VirtualDocumentRoot D:/server/dev/%2+/
</VirtualHost>

<VirtualHost *:443>
    UseCanonicalName Off
    ServerAlias local.*
    VirtualDocumentRoot D:/server/dev/%2+/

    SSLEngine on
    SSLProtocol all -SSLv2 -SSLv3

    SSLCipherSuite ALL:!ADH:!EXPORT56:RC4+RSA:+HIGH:+MEDIUM:+LOW:+SSLv2:+EXP

    SSLCertificateFile D:/server/code/ssl/local/certificate.crt
    SSLCertificateKeyFile D:/server/code/ssl/local/private.key
</VirtualHost>

########################################################################
# domain: diepxuan.* to www.diepxuan.vn
########################################################################
<VirtualHost *:80>
    UseCanonicalName Off
    ServerAlias diepxuan.*
    VirtualDocumentRoot D:/server/live/www.diepxuan.vn/
</VirtualHost>

<VirtualHost *:443>
    UseCanonicalName Off
    ServerAlias diepxuan.*
    VirtualDocumentRoot D:/server/live/www.diepxuan.vn/

    SSLEngine on
    SSLProtocol all -SSLv2 -SSLv3

    SSLCipherSuite ALL:!ADH:!EXPORT56:RC4+RSA:+HIGH:+MEDIUM:+LOW:+SSLv2:+EXP

    SSLCertificateFile D:/server/code/ssl/diepxuan.com/certificate.crt
    SSLCertificateKeyFile D:/server/code/ssl/diepxuan.com/private.key
    SSLCACertificateFile D:/server/code/ssl/diepxuan.com/ca_bundle.crt
</VirtualHost>

########################################################################
# domain: *.diepxuan.* to *.diepxuan.vn
########################################################################
<VirtualHost *:80>
    UseCanonicalName Off
    ServerAlias *.diepxuan.*
    VirtualDocumentRoot D:/server/live/%1.0.diepxuan.vn/
</VirtualHost>

<VirtualHost *:443>
    UseCanonicalName Off
    ServerAlias *.diepxuan.*
    VirtualDocumentRoot D:/server/live/%1.0.diepxuan.vn/

    SSLEngine on
    SSLProtocol all -SSLv2 -SSLv3

    SSLCipherSuite ALL:!ADH:!EXPORT56:RC4+RSA:+HIGH:+MEDIUM:+LOW:+SSLv2:+EXP

    SSLCertificateFile D:/server/code/ssl/diepxuan.com/certificate.crt
    SSLCertificateKeyFile D:/server/code/ssl/diepxuan.com/private.key
    SSLCACertificateFile D:/server/code/ssl/diepxuan.com/ca_bundle.crt
</VirtualHost>

########################################################################
# domain: all www to non-www
########################################################################
<VirtualHost *:80>
    UseCanonicalName Off
    ServerAlias www.*
    VirtualDocumentRoot D:/server/live/%2+/
</VirtualHost>

<VirtualHost *:443>
    UseCanonicalName Off
    ServerAlias www.*
    VirtualDocumentRoot D:/server/live/%2+/

    # SSLEngine on
    # SSLProtocol all -SSLv2 -SSLv3

    # SSLCipherSuite ALL:!ADH:!EXPORT56:RC4+RSA:+HIGH:+MEDIUM:+LOW:+SSLv2:+EXP

    # SSLCertificateFile D:/server/code/ssl/%2+/certificate.crt
    # SSLCertificateKeyFile D:/server/code/ssl/%2+/private.key
    # SSLCACertificateFile D:/server/code/ssl/%2+/ca_bundle.crt
</VirtualHost>

########################################################################
# domain: all
########################################################################
<VirtualHost *:80>
    UseCanonicalName Off
    ServerAlias *
    VirtualDocumentRoot D:/server/live/%0/
</VirtualHost>

<VirtualHost *:443>
    UseCanonicalName Off
    ServerAlias *
    VirtualDocumentRoot D:/server/live/%0/

    # SSLEngine on
    # SSLProtocol all -SSLv2 -SSLv3

    # SSLCipherSuite ALL:!ADH:!EXPORT56:RC4+RSA:+HIGH:+MEDIUM:+LOW:+SSLv2:+EXP

    # SSLCertificateFile D:/server/code/ssl/%0/certificate.crt
    # SSLCertificateKeyFile D:/server/code/ssl/%0/private.key
    # SSLCACertificateFile D:/server/code/ssl/%0/ca_bundle.crt
</VirtualHost>
