php_admin_value date.timezone           "Asia/Ho_Chi_Minh"

php_value       display_errors          1
php_value       display_startup_errors  1
php_flag        display_errors          1
php_flag        display_startup_errors  1
php_value       error_reporting         -1

php_value       max_execution_time      30
php_value       memory_limit            128M

php_value       post_max_size           128M
php_value       upload_max_filesize     128M

php_value       max_input_vars          75000

# dev server does not need lots of spare servers
MaxSpareServers 2
MinSpareServers 1
StartServers    3

<Directory /mnt/d/server>
    Options Indexes FollowSymLinks
    AllowOverride All
    Require all granted

    RewriteEngine On
    RewriteBase /
    RewriteRule ^index\.php$ - [L]
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond %{REQUEST_FILENAME} !-l
    RewriteRule . /index.php [L]
</Directory>

<IfModule mod_ssl.c>
    Listen 443
</IfModule>

########################################################################
# diepxuan.vn (product)
# domain: diepxuan.vn www.diepxuan.vn
########################################################################
<VirtualHost *:80>
    ServerAdmin admin@diepxuan.vn
    ServerName diepxuan.vn
    ServerAlias www.diepxuan.vn
    ServerAlias diepxuan.com
    ServerAlias www.diepxuan.com

    DocumentRoot /mnt/d/server/live/www.diepxuan.vn/

    <Directory /mnt/d/server/live/www.diepxuan.vn>
        Options Indexes FollowSymLinks
        AllowOverride All
        Require all granted
    </Directory>
</VirtualHost>

<VirtualHost *:443>
    ServerAdmin admin@diepxuan.vn
    ServerName diepxuan.vn
    ServerAlias www.diepxuan.vn
    ServerAlias diepxuan.com
    ServerAlias www.diepxuan.com

    DocumentRoot /mnt/d/server/live/www.diepxuan.vn/

    SSLEngine on
    SSLProtocol all -SSLv2 -SSLv3

    SSLCipherSuite ALL:!ADH:!EXPORT56:RC4+RSA:+HIGH:+MEDIUM:+LOW:+SSLv2:+EXP

    SSLCertificateFile /etc/apache2/ssl/apache.crt
    SSLCertificateKeyFile /etc/apache2/ssl/apache.key


    <Directory /mnt/d/server/live/www.diepxuan.vn>
        Options Indexes FollowSymLinks
        AllowOverride All
        Require all granted
    </Directory>
</VirtualHost>
# <VirtualHost *:80>
#     ServerAdmin admin@diepxuan.vn
#     ServerName diepxuan.vn
#     ServerAlias www.diepxuan.vn

#     DocumentRoot /mnt/d/server/live/diepxuan.vn/dist/

#     <Directory /mnt/d/server/live/diepxuan.vn/dist>
#         Options Indexes FollowSymLinks
#         AllowOverride All
#         Require all granted
#     </Directory>
# </VirtualHost>

########################################################################
# diepxuan.vn (develop)
# domain: diepxuan.com www.diepxuan.com demo.diepxuan.vn
########################################################################
<VirtualHost *:80>
    ServerAdmin admin@diepxuan.vn
    ServerAlias demo.diepxuan.com
    ServerAlias demo.diepxuan.vn

    ProxyRequests off
    ProxyPreserveHost On
    ProxyVia Full

    <Proxy *>
        Require all granted
        Order deny,allow
        Allow from all
    </Proxy>

    <Location />
        ProxyPass http://localhost:3080/
        ProxyPassReverse http://localhost:3080/
    </Location>
</VirtualHost>

########################################################################
# app.diepxuan.vn (develop)
# domain: app.diepxuan.com app.diepxuan.vn
########################################################################
<VirtualHost *:80>
    ServerAdmin admin@diepxuan.vn
    ServerName app.diepxuan.com
    ServerAlias app.diepxuan.vn

    ProxyRequests off
    ProxyPreserveHost On
    ProxyVia Full

    <Proxy *>
        Require all granted
        Order deny,allow
        Allow from all
    </Proxy>

    <Location />
        ProxyPass http://localhost:3081/
        ProxyPassReverse http://localhost:3081/
    </Location>
</VirtualHost>

########################################################################
# localhost (private develop for ~subfolder, phpmyadmin, ddns app)
# domain: dev.diepxuan.vn diepxuan.com local.dev localhost dxvn.ddns.net
########################################################################
<VirtualHost *:80>
    ServerName dev.diepxuan.vn
    ServerAlias dev.diepxuan.com
    ServerAlias dxvn.ddns.net
    ServerAlias 192.168.1.222
    ServerAlias local.dev
    ServerAlias localhost
    DocumentRoot /mnt/d/server/dev/

    <Directory /mnt/d/server/dev>
        Options Indexes FollowSymLinks
        AllowOverride All
        Require all granted
    </Directory>

    <Directory /mnt/d/server/live>
        Options Indexes FollowSymLinks
        AllowOverride All
        Require all granted
    </Directory>

    AliasMatch "^/~([a-zA-Z0-9\.]+)/(.+)" "/mnt/d/server/live/$1/$2"
    AliasMatch "^/~([a-zA-Z0-9\.]+)/"     "/mnt/d/server/live/$1/"
    AliasMatch "^/~([a-zA-Z0-9\.]+)"      "/mnt/d/server/live/$1"

    AliasMatch "^/phpmyadmin/(.+)"      "/mnt/d/server/live/pma.diepxuan.vn/$1"
    AliasMatch "^/phpmyadmin/"          "/mnt/d/server/live/pma.diepxuan.vn/"
    AliasMatch "^/phpmyadmin"           "/mnt/d/server/live/pma.diepxuan.vn"

    AliasMatch "^/phpMyAdmin/(.+)"      "/mnt/d/server/live/pma.diepxuan.vn/$1"
    AliasMatch "^/phpMyAdmin/"          "/mnt/d/server/live/pma.diepxuan.vn/"
    AliasMatch "^/phpMyAdmin"           "/mnt/d/server/live/pma.diepxuan.vn"

    AliasMatch "^/ddns/(.+)"            "/mnt/d/server/code/ddns/$1"
    AliasMatch "^/ddns/"                "/mnt/d/server/code/ddns/"
    AliasMatch "^/ddns"                 "/mnt/d/server/code/ddns"

    AliasMatch "^/code/(.+)"            "/mnt/d/server/code/$1"
    AliasMatch "^/code/"                "/mnt/d/server/code/"
    AliasMatch "^/code"                 "/mnt/d/server/code"
</VirtualHost>

<VirtualHost *:443>
    ServerName dev.diepxuan.vn
    ServerAlias dev.diepxuan.com
    ServerAlias dxvn.ddns.net
    ServerAlias local.dev
    ServerAlias localhost
    DocumentRoot /mnt/d/server/dev/

    SSLEngine on
    SSLProtocol all -SSLv2 -SSLv3

    SSLCipherSuite ALL:!ADH:!EXPORT56:RC4+RSA:+HIGH:+MEDIUM:+LOW:+SSLv2:+EXP

    SSLCertificateFile /etc/apache2/ssl/apache.crt
    SSLCertificateKeyFile /etc/apache2/ssl/apache.key

    <Directory /mnt/d/server/dev>
        Options Indexes FollowSymLinks
        AllowOverride All
        Require all granted
    </Directory>

    <Directory /mnt/d/server/live>
        Options Indexes FollowSymLinks
        AllowOverride All
        Require all granted
    </Directory>

    AliasMatch "^/~([a-zA-Z0-9\.]+)/(.+)" "/mnt/d/server/live/$1/$2"
    AliasMatch "^/~([a-zA-Z0-9\.]+)/"     "/mnt/d/server/live/$1/"
    AliasMatch "^/~([a-zA-Z0-9\.]+)"      "/mnt/d/server/live/$1"

    AliasMatch "^/phpmyadmin/(.+)"      "/mnt/d/server/live/pma.diepxuan.vn/$1"
    AliasMatch "^/phpmyadmin/"          "/mnt/d/server/live/pma.diepxuan.vn/"
    AliasMatch "^/phpmyadmin"           "/mnt/d/server/live/pma.diepxuan.vn"

    AliasMatch "^/phpMyAdmin/(.+)"      "/mnt/d/server/live/pma.diepxuan.vn/$1"
    AliasMatch "^/phpMyAdmin/"          "/mnt/d/server/live/pma.diepxuan.vn/"
    AliasMatch "^/phpMyAdmin"           "/mnt/d/server/live/pma.diepxuan.vn"

    AliasMatch "^/ddns/(.+)"            "/mnt/d/server/code/ddns/$1"
    AliasMatch "^/ddns/"                "/mnt/d/server/code/ddns/"
    AliasMatch "^/ddns"                 "/mnt/d/server/code/ddns"

    AliasMatch "^/code/(.+)"            "/mnt/d/server/code/$1"
    AliasMatch "^/code/"                "/mnt/d/server/code/"
    AliasMatch "^/code"                 "/mnt/d/server/code"
</VirtualHost>

########################################################################
# localhost (develop)
# domain: *.local.dev *.dev.diepxuan.com *.dev.diepxuan.vn *.localhost
########################################################################
<VirtualHost *:80>
    UseCanonicalName Off
    ServerAlias *.dev.diepxuan.vn
    ServerAlias *.dev.diepxuan.com
    ServerAlias *.localhost
    ServerAlias *.local.dev
    VirtualDocumentRoot /mnt/d/server/dev/%1/

    <Directory /mnt/d/server/dev/%1>
        Options Indexes FollowSymLinks
        AllowOverride All
        Require all granted
    </Directory>
</VirtualHost>

<VirtualHost *:443>
    UseCanonicalName Off
    ServerAlias *.dev.diepxuan.vn
    ServerAlias *.dev.diepxuan.com
    ServerAlias *.localhost
    ServerAlias *.local.dev
    VirtualDocumentRoot /mnt/d/server/dev/%1/

    SSLEngine on
    SSLProtocol all -SSLv2 -SSLv3

    SSLCipherSuite ALL:!ADH:!EXPORT56:RC4+RSA:+HIGH:+MEDIUM:+LOW:+SSLv2:+EXP

    SSLCertificateFile /etc/apache2/ssl/apache.crt
    SSLCertificateKeyFile /etc/apache2/ssl/apache.key

    <Directory /mnt/d/server/dev/%1>
        Options Indexes FollowSymLinks
        AllowOverride All
        Require all granted
    </Directory>
</VirtualHost>

########################################################################
# localhost (develop)
# domain: local.*
########################################################################
<VirtualHost *:80>
    UseCanonicalName Off
    ServerAlias local.*
    VirtualDocumentRoot /mnt/d/server/dev/%2+/

    <Directory /mnt/d/server/dev/%2+>
        Options Indexes FollowSymLinks
        AllowOverride All
        Require all granted
    </Directory>
</VirtualHost>

<VirtualHost *:443>
    UseCanonicalName Off
    ServerAlias local.*
    VirtualDocumentRoot /mnt/d/server/dev/%2+/

    SSLEngine on
    SSLProtocol all -SSLv2 -SSLv3

    SSLCipherSuite ALL:!ADH:!EXPORT56:RC4+RSA:+HIGH:+MEDIUM:+LOW:+SSLv2:+EXP

    SSLCertificateFile /etc/apache2/ssl/apache.crt
    SSLCertificateKeyFile /etc/apache2/ssl/apache.key

    <Directory /mnt/d/server/dev/%2+>
        Options Indexes FollowSymLinks
        AllowOverride All
        Require all granted
    </Directory>
</VirtualHost>

########################################################################
# localhost (private develop for GSS project)
# domain: custom
########################################################################
<VirtualHost *:80>
    ServerAlias petapi.local.dev
    ServerAlias petapi.dev.diepxuan.vn
    DocumentRoot /mnt/d/server/dev/pet/pet-api/api/public/

    <Directory /mnt/d/server/dev/pet/pet-api/api>
        Options Indexes FollowSymLinks
        AllowOverride All
        Require all granted
    </Directory>
</VirtualHost>

<VirtualHost *:80>
    ServerName local-trade.fivedollarshake.com
    DocumentRoot /mnt/d/server/dev/fivedollashake/pub/

    SetEnv MAGE_RUN_CODE "trade"
    SetEnv MAGE_RUN_TYPE "website"

    <Directory /mnt/d/server/dev/fivedollashake/pub>
        Options Indexes FollowSymLinks
        AllowOverride All
        Require all granted
    </Directory>
</VirtualHost>

<VirtualHost *:80>
    ServerName ncp.vn
    ServerAlias *.ncp.vn
    DocumentRoot /mnt/d/server/dev/ncp/

    <Directory /mnt/d/server/dev/ncp>
        Options Indexes FollowSymLinks
        AllowOverride All
        Require all granted
    </Directory>
</VirtualHost>

# <VirtualHost *:80>
#     ServerAdmin admin@diepxuan.vn
#     ServerAlias ci.diepxuan.vn
#     ServerAlias ci.diepxuan.com

#     ProxyRequests off
#     ProxyPreserveHost On
#     ProxyVia Full

#     <Proxy *>
#         Require all granted
#         Order deny,allow
#         Allow from all
#     </Proxy>

#     <Location />
#         ProxyPass http://localhost:8080/
#         ProxyPassReverse http://localhost:8080/
#     </Location>
# </VirtualHost>

########################################################################
# localhost (live site for diepxuan.vn)
# domain: *.diepxuan.vn *.diepxuan.com
########################################################################
<VirtualHost *:80>
    UseCanonicalName Off
    ServerAlias *.diepxuan.vn
    ServerAlias *.diepxuan.com
    VirtualDocumentRoot /mnt/d/server/live/%1.0.%2.0.vn/

    <Directory /mnt/d/server/live/%1.0.%2.0.vn>
        Options Indexes FollowSymLinks
        AllowOverride All
        Require all granted
    </Directory>
</VirtualHost>

########################################################################
# another live site
# domain: all
########################################################################
<VirtualHost *:80>
    UseCanonicalName Off
    ServerAlias *.vn
    ServerAlias *.com
    ServerAlias *.org
    VirtualDocumentRoot /mnt/d/server/live/%0/

    <Directory /mnt/d/server/live/%0>
        Options Indexes FollowSymLinks
        AllowOverride All
        Require all granted
    </Directory>
</VirtualHost>

<VirtualHost *:80>
    UseCanonicalName Off
    ServerAlias www.*.vn
    ServerAlias www.*.com
    ServerAlias www.*.org
    VirtualDocumentRoot /mnt/d/server/live/%2.0/

    <Directory /mnt/d/server/live/%2.0>
        Options Indexes FollowSymLinks
        AllowOverride All
        Require all granted
    </Directory>
</VirtualHost>
