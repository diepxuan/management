#LoadModule php7_module C:/php/php7apache2_4.dll
LoadModule php5_module C:/php/php5apache2_4.dll
PHPIniDir C:/php

<IfModule mime_module>
	AddType application/x-httpd-php .php
	AddType application/x-httpd-php-source .phps
</IfModule>

<IfModule php7_module>
	php_admin_value date.timezone "Asia/Ho_Chi_Minh"
</IfModule>

<IfModule php5_module>
	php_admin_value date.timezone "Asia/Ho_Chi_Minh"
</IfModule>

LoadModule rewrite_module modules/mod_rewrite.so
LoadModule vhost_alias_module modules/mod_vhost_alias.so

<IfModule dir_module>
	DirectoryIndex index.html index.htm index.php
</IfModule>

<FilesMatch "^\.ht">
	Require all denied
</FilesMatch>

ServerName localhost
DocumentRoot "D:/server/www"

<Directory "D:/server/www">
	Options Indexes FollowSymLinks
	AllowOverride All
	Require all granted
</Directory>

<IfModule rewrite_module>
	Options +FollowSymLinks
	RewriteEngine on

	RewriteRule .* - [E=HTTP_AUTHORIZATION:%{HTTP:Authorization}]

	RewriteCond %{REQUEST_METHOD} ^TRAC[EK]
	RewriteRule .* - [L,R=405]

	RewriteCond %{REQUEST_FILENAME} !-f
	RewriteCond %{REQUEST_FILENAME} !-d
	RewriteCond %{REQUEST_FILENAME} !-l

	RewriteRule .* index.php [L]
</IfModule>

LoadModule proxy_module modules/mod_proxy.so
LoadModule proxy_http_module modules/mod_proxy_http.so
#LoadModule proxy_http2_module modules/mod_proxy_http2.so

#<VirtualHost *>
#  ServerAdmin admin@diepxuan.vn
#  ServerName diepxuan.vn
#  ServerAlias www.diepxuan.vn
#
#  DocumentRoot "D:/server/www/live/www.diepxuan.vn"
#
#  <Directory "D:/server/www/live/www.diepxuan.vn">
#    Options Indexes FollowSymLinks
#    AllowOverride All
#    Require all granted
#  </Directory>
#</VirtualHost>

########################################################################
# diepxuan.vn (product)
# domain: diepxuan.vn www.diepxuan.vn
########################################################################
<VirtualHost *>
  ServerAdmin admin@diepxuan.vn
  ServerName diepxuan.vn
  ServerAlias www.diepxuan.vn

  DocumentRoot "D:/server/www/live/diepxuan.vn/dist"

  <Directory "D:/server/www/live/diepxuan.vn/dist">
    Options Indexes FollowSymLinks
    AllowOverride All
    Require all granted
  </Directory>
</VirtualHost>

########################################################################
# diepxuan.vn (develop)
# domain: diepxuan.com www.diepxuan.com demo.diepxuan.vn
########################################################################
<VirtualHost *>
  ServerAdmin admin@diepxuan.vn
  ServerName diepxuan.com
  ServerAlias www.diepxuan.com
  ServerAlias demo.diepxuan.vn

  ProxyRequests off

  <Proxy *>
    Require all granted
    Order deny,allow
    Allow from all
  </Proxy>

  <Location />
    ProxyPass http://localhost:3080/
    ProxyPassReverse http://localhost:3080/
  </Location>
</VirtualHost>

########################################################################
# localhost (private develop for ~subfolder, phpmyadmin, ddns app)
# domain: dev.diepxuan.vn diepxuan.com local.dev localhost dxvn.ddns.net
########################################################################
<VirtualHost *>
	ServerName dev.diepxuan.vn
	ServerAlias dxvn.ddns.net
  ServerAlias local.dev
  ServerAlias localhost
	DocumentRoot "D:/server/www/dev"

	<Directory "D:/server/www/dev">
		Options Indexes FollowSymLinks
		AllowOverride All
		Require all granted
	</Directory>

	<IfModule alias_module>
		AliasMatch "^/~([a-zA-Z0-9]+)/(.+)" "D:/server/www/dev/$1/$2"
		AliasMatch "^/~([a-zA-Z0-9]+)/"     "D:/server/www/dev/$1/"
		AliasMatch "^/~([a-zA-Z0-9]+)"      "D:/server/www/dev/$1"

		AliasMatch "^/phpmyadmin/(.+)"      "D:/server/www/live/pma.diepxuan.vn/$1"
		AliasMatch "^/phpmyadmin/"          "D:/server/www/live/pma.diepxuan.vn/"
		AliasMatch "^/phpmyadmin"           "D:/server/www/live/pma.diepxuan.vn"

		AliasMatch "^/phpMyAdmin/(.+)"      "D:/server/www/live/pma.diepxuan.vn/$1"
		AliasMatch "^/phpMyAdmin/"          "D:/server/www/live/pma.diepxuan.vn/"
		AliasMatch "^/phpMyAdmin"           "D:/server/www/live/pma.diepxuan.vn"

		AliasMatch "^/ddns/(.+)"            "D:/server/www/code/ddns/$1"
		AliasMatch "^/ddns/"                "D:/server/www/code/ddns/"
		AliasMatch "^/ddns"                 "D:/server/www/code/ddns"
	</IfModule>
</VirtualHost>

########################################################################
# localhost (private develop for pet project)
# domain: petapi.local.dev petapi.dev.diepxuan.vn
########################################################################
<VirtualHost *>
  ServerAlias petapi.local.dev
  ServerAlias petapi.dev.diepxuan.vn
  DocumentRoot "D:/server/www/dev/pet/pet-api/api/public"

  <Directory "D:/server/www/dev/pet/pet-api/api">
    Options Indexes FollowSymLinks
    AllowOverride All
    Require all granted
  </Directory>
</VirtualHost>

########################################################################
# localhost (develop)
# domain: *.local.dev *.dev.diepxuan.vn *.localhost
########################################################################
<VirtualHost *>
  UseCanonicalName Off
  ServerAlias *.dev.diepxuan.vn
  ServerAlias *.localhost
  ServerAlias *.local.dev
  VirtualDocumentRoot "D:/server/www/dev/%1"

  <Directory "D:/server/www/dev/%1">
    Options Indexes FollowSymLinks
    AllowOverride All
    Require all granted
  </Directory>
</VirtualHost>

########################################################################
# localhost (live site for diepxuan.vn)
# domain: *.diepxuan.vn
########################################################################
<VirtualHost *>
  UseCanonicalName Off
  ServerAlias *.diepxuan.vn
  VirtualDocumentRoot "D:/server/www/live/%0"

  <Directory "D:/server/www/live/%0">
    Options Indexes FollowSymLinks
    AllowOverride All
    Require all granted
  </Directory>
</VirtualHost>
